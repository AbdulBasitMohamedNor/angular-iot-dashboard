import{a as L,c as W}from"./chunk-LSGR2T7S.js";import{$a as d,Cb as M,Da as u,P as Y,Pa as h,Qa as x,Ra as C,Sa as b,Ta as y,U as T,Ua as s,Va as l,Wa as _,Xa as p,Ya as m,Z as w,Za as S,_ as D,_a as E,cb as v,db as j,eb as k,fa as N,fb as i,gb as g,hb as f,mb as U,pb as $,qb as R,ta as a,u as G}from"./chunk-H2ARN4F4.js";import{a as P,b as O}from"./chunk-JKOY2XUY.js";var J=(r,t)=>t.id;function X(r,t){if(r&1&&(s(0,"div",6),_(1,"div",9),l()),r&2){let e=d();a(),y("options",e.gaugeOptions())("theme","dark")}}function Z(r,t){if(r&1&&(s(0,"div",6),_(1,"div",10),l()),r&2){let e=d();a(),y("options",e.chartOptions())("theme","dark")}}function K(r,t){if(r&1&&(s(0,"div",7),_(1,"div",11),l()),r&2){let e=d();a(),v("width",e.sensorData().progress,"%")("background",e.sensorData().color.primary)}}function Q(r,t){if(r&1){let e=S();s(0,"button",13),E("click",function(){let o=w(e).$implicit,c=d(2);return D(c.onControlClick(o.id))}),i(1),l()}if(r&2){let e=t.$implicit;j("active",e.isActive),a(),f(" ",e.label," ")}}function tt(r,t){if(r&1&&(s(0,"div",8),C(1,Q,2,3,"button",12,J),l()),r&2){let e=d();a(),b(e.sensorData().controls)}}var I=class r{sensorData=R.required();controlClick=$();chartOptions=U(()=>{let t=this.sensorData(),e=t.chartData||[];if(t.type==="energy"){let n=t.currentValue,c=this.getMaxValueForSensor(t.type)-n;return{animation:!0,animationDuration:1e3,series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1},emphasis:{label:{show:!1}},labelLine:{show:!1},data:[{value:n,name:"Used",itemStyle:{color:{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:t.color.primary},{offset:1,color:t.color.secondary||t.color.primary}]}}},{value:c,name:"Available",itemStyle:{color:"rgba(255,255,255,0.1)"}}]}]}}else return t.type==="production"?{animation:!0,animationDuration:750,grid:{left:0,right:0,top:0,bottom:0},xAxis:{type:"category",show:!1,data:e.map((n,o)=>o)},yAxis:{type:"value",show:!1,min:"dataMin",max:"dataMax"},series:[{type:"bar",data:e,itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:t.color.primary},{offset:1,color:t.color.secondary||t.color.primary}]},borderRadius:[2,2,0,0]},animationDelay:n=>n*10}]}:t.type==="motor_speed"?{animation:!0,animationDuration:750,grid:{left:0,right:0,top:0,bottom:0},xAxis:{type:"category",show:!1,data:e.map((n,o)=>o)},yAxis:{type:"value",show:!1,min:"dataMin",max:"dataMax"},series:[{type:"line",data:e,smooth:!0,symbol:"none",lineStyle:{color:t.color.primary,width:3},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:t.color.primary+"60"},{offset:1,color:t.color.primary+"10"}]}},animationDelay:n=>n*5}]}:{animation:!0,animationDuration:750,grid:{left:0,right:0,top:0,bottom:0},xAxis:{type:"category",show:!1,data:e.map((n,o)=>o)},yAxis:{type:"value",show:!1,min:"dataMin",max:"dataMax"},series:[{type:"line",data:e,smooth:!0,symbol:"circle",symbolSize:4,lineStyle:{color:t.color.primary,width:2},itemStyle:{color:t.color.primary,borderColor:"#ffffff",borderWidth:1},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:t.color.primary+"40"},{offset:1,color:t.color.primary+"00"}]}},animationDelay:n=>n*5}]}});gaugeOptions=U(()=>{let t=this.sensorData(),e=t.currentValue;return{series:[{type:"gauge",startAngle:200,endAngle:-40,min:0,max:this.getMaxValueForSensor(t.type),splitNumber:5,itemStyle:{color:t.color.primary,shadowColor:t.color.primary+"40",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2},progress:{show:!0,roundCap:!0,width:8},pointer:{length:"60%",width:4,itemStyle:{color:t.color.primary}},axisLine:{roundCap:!0,lineStyle:{width:8,color:[[1,"rgba(255,255,255,0.1)"]]}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},title:{fontSize:14,color:"#ffffff",offsetCenter:[0,"80%"]},detail:{width:50,height:14,fontSize:18,color:t.color.primary,backgroundColor:"transparent",borderRadius:3,formatter:o=>t.type==="temperature"?Math.round(o)+"\xB0C":t.type==="energy"?Math.round(o)+"kW":t.type==="pressure"?Math.round(o)+"bar":Math.round(o).toString(),offsetCenter:[0,"40%"]},data:[{value:e,name:t.name}]}],backgroundColor:"transparent"}});getSensorClass(){return this.sensorData().type}shouldShowGauge(){let t=this.sensorData().type;return t==="temperature"||t==="pressure"}shouldShowChart(){let t=this.sensorData().type;return t==="humidity"||t==="motor_speed"||t==="production"||t==="energy"}shouldShowProgressBar(){let t=this.sensorData().type;return t==="energy"||t==="production"}getMaxValueForSensor(t){switch(t){case"temperature":return 100;case"pressure":return 50;case"energy":return 500;case"humidity":return 100;case"motor_speed":return 3e3;case"production":return 1e3;default:return 100}}formatValue(t){return t>=1e3?t.toLocaleString():t%1===0?t.toString():t.toFixed(1)}formatGaugeValue(){let t=this.sensorData(),e=t.currentValue;return t.type==="temperature"?Math.round(e)+"\xB0":t.type==="energy"?Math.round(e)+"kW":t.type==="pressure"?Math.round(e).toString():this.formatValue(e)}onControlClick(t){this.controlClick.emit({sensorId:this.sensorData().id,controlId:t})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-sensor-card"]],inputs:{sensorData:[1,"sensorData"]},outputs:{controlClick:"controlClick"},decls:14,vars:11,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-icon"],[1,"card-value"],[1,"card-unit"],[1,"chart-container"],[1,"progress-bar"],[1,"controls"],["echarts","",2,"width","100%","height","120px",3,"options","theme"],["echarts","",2,"width","100%","height","80px",3,"options","theme"],[1,"progress-fill"],[1,"btn",3,"active"],[1,"btn",3,"click"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),i(3),l(),s(4,"div",3),i(5),l()(),s(6,"div",4),i(7),s(8,"span",5),i(9),l()(),h(10,X,2,2,"div",6)(11,Z,2,2,"div",6),h(12,K,2,4,"div",7),h(13,tt,3,0,"div",8),l()),e&2){let o;k(n.getSensorClass()),a(3),g(n.sensorData().name),a(),v("background",n.sensorData().color.primary),a(),f(" ",n.sensorData().icon," "),a(2),f(" ",n.formatValue(n.sensorData().currentValue)," "),a(2),g(n.sensorData().unit),a(),x(n.shouldShowGauge()?10:n.shouldShowChart()?11:-1),a(2),x(n.shouldShowProgressBar()?12:-1),a(),x((o=n.sensorData().controls)!=null&&o.length?13:-1)}},dependencies:[M,L],styles:['.card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop);border:1px solid var(--glass-border);border-radius:20px;padding:25px;transition:var(--transition-normal);position:relative;overflow:hidden;height:350px;min-width:280px;max-width:100%;display:flex;flex-direction:column;box-sizing:border-box;box-shadow:var(--shadow-md)}[_ngcontent-%COMP%]:root[data-theme=dark]   .card[_ngcontent-%COMP%]{background:#ffffff0d;border:1px solid rgba(255,255,255,.1)}[_ngcontent-%COMP%]:root[data-theme=light]   .card[_ngcontent-%COMP%]{background:#ffffffe6;border:1px solid rgba(0,0,0,.1)}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--accent-color),transparent);opacity:0;transition:opacity .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);border-color:var(--accent-color);box-shadow:0 20px 40px #0000004d}.card[_ngcontent-%COMP%]:hover:before{opacity:1}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.card-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px;transition:var(--transition-normal)}[_ngcontent-%COMP%]:root[data-theme=dark]   .card-title[_ngcontent-%COMP%]{color:#b0bec5}[_ngcontent-%COMP%]:root[data-theme=light]   .card-title[_ngcontent-%COMP%]{color:var(--text-secondary)}.card-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:#fff}.card-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:15px;color:var(--accent-color)}.card-unit[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;color:var(--text-muted);transition:var(--transition-normal)}[_ngcontent-%COMP%]:root[data-theme=dark]   .card-unit[_ngcontent-%COMP%]{color:#78909c}[_ngcontent-%COMP%]:root[data-theme=light]   .card-unit[_ngcontent-%COMP%]{color:var(--text-muted)}.chart-container[_ngcontent-%COMP%]{width:100%;height:120px;margin-top:auto;margin-bottom:10px;position:relative;display:flex;align-items:center;justify-content:center;flex-shrink:0}.controls[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:auto;padding-top:10px;flex-shrink:0}.btn[_ngcontent-%COMP%]{flex:1;padding:8px 16px;border:1px solid rgba(255,255,255,.2);background:#ffffff0d;color:#fff;border-radius:8px;font-size:.8rem;cursor:pointer;transition:all .2s ease}.btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-color:var(--accent-color)}.btn.active[_ngcontent-%COMP%]{background:var(--accent-color);border-color:var(--accent-color);color:#000}.progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#ffffff1a;border-radius:3px;overflow:hidden;margin-top:10px;margin-bottom:10px;flex-shrink:0}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:3px;transition:width .5s ease}.temperature[_ngcontent-%COMP%]{--accent-color: #ff5722}.humidity[_ngcontent-%COMP%]{--accent-color: #03a9f4}.pressure[_ngcontent-%COMP%]{--accent-color: #9c27b0}.motor_speed[_ngcontent-%COMP%]{--accent-color: #00e676}.energy[_ngcontent-%COMP%]{--accent-color: #ffc107}.production[_ngcontent-%COMP%]{--accent-color: #e91e63}.status-running[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}@media (max-width: 768px){.card[_ngcontent-%COMP%]{padding:20px;min-width:auto;height:320px;max-width:100%}.card-value[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px}.chart-container[_ngcontent-%COMP%]{height:100px}.controls[_ngcontent-%COMP%]{gap:8px}.btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:.75rem}}']})};var et=(r,t)=>t.id;function nt(r,t){r&1&&(p(0,"div",4)(1,"div",5),i(2,"\u2713"),m(),p(3,"div",6),i(4,"All systems operational"),m()())}function rt(r,t){if(r&1&&(p(0,"div",8)(1,"div",9),i(2),m(),p(3,"div",10)(4,"div",11),i(5),m(),p(6,"div",12),i(7),m()(),p(8,"div",13),i(9),m()()),r&2){let e=t.$implicit,n=d(2);k(e.type),a(2),f(" ",e.icon," "),a(3),g(e.title),a(2),g(n.getTimeAgo(e.timestamp)),a(),v("background",n.getAlertColor(e.type)),a(),f(" ",e.type," ")}}function ot(r,t){if(r&1&&C(0,rt,10,8,"div",7,et),r&2){let e=d();b(e.alerts())}}var A=class r{alerts=R.required();getAlertColor(t){switch(t){case"critical":case"error":return"#f44336";case"warning":return"#ff9800";case"info":return"#2196f3";default:return"#64ffda"}}getTimeAgo(t){let n=new Date().getTime()-t.getTime(),o=Math.floor(n/6e4),c=Math.floor(n/36e5);return o<1?"Just now":o<60?`${o}m ago`:c<24?`${c}h ago`:t.toLocaleDateString()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-alert-panel"]],inputs:{alerts:[1,"alerts"]},decls:9,vars:2,consts:[[1,"alert-panel"],[1,"panel-header"],[1,"alert-count"],[1,"alerts-container"],[1,"no-alerts"],[1,"success-icon"],[1,"success-text"],[1,"alert-item",3,"class"],[1,"alert-item"],[1,"alert-icon"],[1,"alert-content"],[1,"alert-message"],[1,"alert-timestamp"],[1,"alert-status"]],template:function(e,n){e&1&&(p(0,"div",0)(1,"div",1)(2,"h3"),i(3,"System Alerts"),m(),p(4,"div",2),i(5),m()(),p(6,"div",3),h(7,nt,5,0,"div",4)(8,ot,2,0),m()()),e&2&&(a(5),g(n.alerts().length),a(2),x(n.alerts().length===0?7:8))},dependencies:[M],styles:['.alert-panel[_ngcontent-%COMP%]{background:#ffffff08;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:25px;height:400px;display:flex;flex-direction:column;position:relative;overflow:hidden}.alert-panel[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,#64ffda,transparent);opacity:.6}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid rgba(255,255,255,.1)}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff;margin:0}.alert-count[_ngcontent-%COMP%]{background:#64ffda;color:#000;padding:5px 12px;border-radius:12px;font-size:.8rem;font-weight:600;min-width:24px;text-align:center}.alerts-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-right:5px;margin-right:-5px}.alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:2px}.alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#64ffda4d;border-radius:2px}.alerts-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64ffda80}.no-alerts[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:#64ffda;text-align:center}.success-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:15px;width:80px;height:80px;border-radius:50%;background:#64ffda1a;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_pulse 2s infinite}.success-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}}.alert-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;margin-bottom:10px;background:#ffffff05;border:1px solid rgba(255,255,255,.05);border-radius:12px;transition:all .3s ease;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.alert-item[_ngcontent-%COMP%]:hover{background:#ffffff0d;border-color:#ffffff1a;transform:translate(5px)}.alert-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;font-weight:700;color:#fff;flex-shrink:0}.alert-item.critical[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#d32f2f)}.alert-item.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00)}.alert-item.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2)}.alert-item.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#d32f2f)}.alert-content[_ngcontent-%COMP%]{flex:1}.alert-message[_ngcontent-%COMP%]{font-size:.95rem;color:#fff;margin-bottom:4px;line-height:1.4}.alert-timestamp[_ngcontent-%COMP%]{font-size:.8rem;color:#78909c}.alert-status[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.7rem;font-weight:600;text-transform:uppercase;color:#000;flex-shrink:0}.alert-item.critical[_ngcontent-%COMP%]{border-left:3px solid #f44336}.alert-item.warning[_ngcontent-%COMP%]{border-left:3px solid #ff9800}.alert-item.info[_ngcontent-%COMP%]{border-left:3px solid #2196f3}.alert-item.error[_ngcontent-%COMP%]{border-left:3px solid #f44336}@media (max-width: 768px){.alert-panel[_ngcontent-%COMP%]{padding:20px;height:auto;min-height:300px;margin:0 -5px}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}.alert-item[_ngcontent-%COMP%]{padding:12px;gap:10px}.alert-icon[_ngcontent-%COMP%]{width:35px;height:35px;font-size:1rem}.alert-message[_ngcontent-%COMP%]{font-size:.9rem}.alert-status[_ngcontent-%COMP%]{font-size:.65rem;padding:3px 8px}}']})};var V=class r{sensors=N([{id:"temp-001",name:"Temperature Sensor",type:"temperature",icon:"\u{1F321}\uFE0F",currentValue:72.5,unit:"\xB0F",minValue:32,maxValue:120,progress:65,color:{primary:"#ff6348",secondary:"#ff4757"},isOnline:!0,lastUpdated:new Date,controls:[{id:"auto",label:"Auto",isActive:!0,action:"auto"},{id:"manual",label:"Manual",isActive:!1,action:"manual"}],chartData:this.generateChartData()},{id:"hum-001",name:"Humidity Monitor",type:"humidity",icon:"\u{1F4A7}",currentValue:45,unit:"%",minValue:0,maxValue:100,progress:45,color:{primary:"#00d4ff",secondary:"#0984e3"},isOnline:!0,lastUpdated:new Date,controls:[{id:"increase",label:"Increase",isActive:!1,action:"increase"},{id:"decrease",label:"Decrease",isActive:!1,action:"decrease"}],chartData:this.generateChartData()},{id:"press-001",name:"Pressure Gauge",type:"pressure",icon:"\u{1F3AF}",currentValue:1013,unit:"hPa",minValue:900,maxValue:1100,progress:75,color:{primary:"#a55eea",secondary:"#8854d0"},isOnline:!0,lastUpdated:new Date,controls:[{id:"monitor",label:"Monitor",isActive:!0,action:"monitor"},{id:"calibrate",label:"Calibrate",isActive:!1,action:"calibrate"}],chartData:this.generateChartData()},{id:"motor-001",name:"Motor Speed",type:"motor_speed",icon:"\u2699\uFE0F",currentValue:1750,unit:"RPM",minValue:0,maxValue:3e3,progress:58,color:{primary:"#00ff88",secondary:"#00b894"},isOnline:!0,lastUpdated:new Date,controls:[{id:"start",label:"Start",isActive:!1,action:"start"},{id:"running",label:"Running",isActive:!0,action:"running"},{id:"stop",label:"Stop",isActive:!1,action:"stop"}],chartData:this.generateChartData()},{id:"energy-001",name:"Energy Meter",type:"energy",icon:"\u26A1",currentValue:325.7,unit:"kWh",minValue:0,maxValue:500,progress:70,color:{primary:"#ffd700",secondary:"#f39c12"},isOnline:!0,lastUpdated:new Date,controls:[{id:"daily",label:"Daily",isActive:!1,action:"daily"},{id:"weekly",label:"Weekly",isActive:!0,action:"weekly"},{id:"monthly",label:"Monthly",isActive:!1,action:"monthly"}],chartData:this.generateChartData()},{id:"prod-001",name:"Production Line",type:"production",icon:"\u{1F4E6}",currentValue:8542,unit:"units",minValue:0,maxValue:1e4,progress:85,color:{primary:"#ff6b9d",secondary:"#c44569"},isOnline:!0,lastUpdated:new Date,controls:[{id:"reset",label:"Reset",isActive:!1,action:"reset"},{id:"track",label:"Track",isActive:!0,action:"track"},{id:"export",label:"Export",isActive:!1,action:"export"}],chartData:this.generateChartData()}]);alerts=N([{id:"alert-001",type:"warning",title:"Temperature approaching upper limit in Zone A",description:"Monitor closely",timestamp:new Date(Date.now()-7200*1e3),icon:"\u26A0\uFE0F",sensorId:"temp-001"},{id:"alert-002",type:"info",title:"Scheduled maintenance for Motor Unit 3 tomorrow",description:"Plan accordingly",timestamp:new Date(Date.now()-300*60*1e3),icon:"\u2139\uFE0F",sensorId:"motor-001"},{id:"alert-003",type:"error",title:"Pressure sensor calibration required",description:"Immediate attention needed",timestamp:new Date(Date.now()-480*60*1e3),icon:"\u274C",sensorId:"press-001"}]);sensorsData=this.sensors.asReadonly();alertsData=this.alerts.asReadonly();constructor(){G(3e3).subscribe(()=>{this.updateSensorValues()})}generateChartData(){return Array.from({length:20},()=>Math.random()*60+20)}updateSensorValues(){this.sensors.update(t=>t.map(e=>O(P({},e),{currentValue:this.generateRandomValue(e),progress:this.calculateProgress(e),lastUpdated:new Date,chartData:[...e.chartData?.slice(1)||[],Math.random()*60+20]})))}generateRandomValue(t){let e=t.currentValue,n=(t.maxValue-t.minValue)*.02,o=(Math.random()-.5)*n,c=e+o;return Math.max(t.minValue,Math.min(t.maxValue,c))}calculateProgress(t){let e=t.maxValue-t.minValue,n=t.currentValue-t.minValue;return Math.round(n/e*100)}updateSensorControl(t,e){this.sensors.update(n=>n.map(o=>{if(o.id===t&&o.controls){let c=o.controls.map(F=>O(P({},F),{isActive:F.id===e}));return O(P({},o),{controls:c})}return o}))}getSensorById(t){return this.sensors().find(e=>e.id===t)}getSystemStatus(){let t=this.alerts().filter(n=>n.type==="error"),e=this.alerts().filter(n=>n.type==="warning");return t.length>0?"error":e.length>0?"warning":"operational"}static \u0275fac=function(e){return new(e||r)};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};var at=(r,t)=>t.id;function it(r,t){if(r&1){let e=S();s(0,"app-sensor-card",6),E("controlClick",function(o){w(e);let c=d();return D(c.onControlClick(o))}),l()}if(r&2){let e=t.$implicit;y("sensorData",e)}}var B=class r{iotService=T(V);themeService=T(W);onControlClick(t){this.iotService.updateSensorControl(t.sensorId,t.controlId)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-iot-dashboard"]],decls:9,vars:1,consts:[[1,"industrial-dashboard"],[1,"header"],[1,"grid"],[3,"sensorData"],[1,"alert-section"],[3,"alerts"],[3,"controlClick","sensorData"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Industrial Control Center"),l()(),s(4,"div",2),C(5,it,1,1,"app-sensor-card",3,at),l(),s(7,"div",4),_(8,"app-alert-panel",5),l()()),e&2&&(a(5),b(n.iotService.sensorsData()),a(3),y("alerts",n.iotService.alertsData()))},dependencies:[M,I,A],styles:[".industrial-dashboard[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:var(--bg-primary);color:var(--text-primary);padding:20px;min-height:100vh;width:100%;box-sizing:border-box;overflow-x:hidden;transition:var(--transition-normal)}[_ngcontent-%COMP%]:root[data-theme=dark]   .industrial-dashboard[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0a0f1c,#1a1f2e)}[_ngcontent-%COMP%]:root[data-theme=light]   .industrial-dashboard[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#e2e8f0)}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:300;color:var(--primary-color);text-shadow:0 0 20px rgba(99,102,241,.3);margin:0;transition:var(--transition-normal)}[_ngcontent-%COMP%]:root[data-theme=dark]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#64ffda;text-shadow:0 0 20px rgba(100,255,218,.3)}[_ngcontent-%COMP%]:root[data-theme=light]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);text-shadow:0 0 20px rgba(99,102,241,.2)}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:30px;margin-bottom:30px;max-width:1300px;margin-left:auto;margin-right:auto;align-items:start}.alert-section[_ngcontent-%COMP%]{max-width:1300px;margin:0 auto}@media (max-width: 1200px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:25px}}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px;margin-left:0;margin-right:0}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.industrial-dashboard[_ngcontent-%COMP%]{padding:15px;max-width:100vw}.alert-section[_ngcontent-%COMP%]{margin-left:0;margin-right:0}}"]})};export{B as IotDashboardComponent};
